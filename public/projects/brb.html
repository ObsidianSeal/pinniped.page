<!DOCTYPE html>

<html lang="en">
	<head>
		<title>Bus Ride Bingo</title>

		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="theme-color" content="#4ecdc4" />

		<link rel="icon" href="../images/icon.png" />

		<meta property="og:url" content="https://pinniped.page/projects/brb" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="BUS RIDE BINGO" />
		<meta property="og:description" content="BUS RIDE BINGO" />
		<meta property="og:image" content="https://pinniped.page/images/icon.png" />

		<style>
			@import url("https://fonts.googleapis.com/css2?family=Roboto");

			:root {
				--background: #f4f1de;
				--foreground: #3d405b;
				--accent1: #e07a5f;
				--accent2: #f2cc8f;
				--accent3: #81b29a;
			}

			::selection {
				background-color: var(--foreground);
				color: var(--background);
			}

			* {
				font-family: "Roboto";
				font-size: 20px;
			}

			body {
				display: flex;
				align-items: center;
				justify-content: center;

				background-color: var(--background);
				color: var(--foreground);

				margin: 0;
				border: 0;
				padding: 20px;
			}

			#board {
				width: 100%;
				max-width: 670px;
				max-height: 670px;

				aspect-ratio: 1 / 1;

				display: flex;
				flex-wrap: wrap;

				border: 2px solid var(--foreground);
			}

			div div {
				width: calc(100% / 5 - 14px);
				max-width: 120px;
				max-height: 120px;

				aspect-ratio: 1 / 1;

				display: flex;
				justify-content: center;
				align-items: center;

				border: 2px solid var(--foreground);
				padding: 5px;

				text-align: center;
			}

			div div:hover {
				cursor: pointer;
			}

			.filled {
				background-color: var(--accent3);
			}

			.filled::selection {
				background-color: var(--foreground);
				color: var(--accent3);
			}

			@media all and (max-width: 500px) {
				body {
					padding: 10px;
				}

				/* div div {
					width: calc(100% / 5 - 8px);
					padding: 2px;
				} */
			}

			@media all and (max-width: 800px) {
				* {
					font-size: 16px;
				}
			}

			@media all and (max-width: 700px) {
				* {
					font-size: 14px;
				}
			}

			@media all and (max-width: 600px) {
				* {
					font-size: 12px;
				}
			}

			@media all and (max-width: 500px) {
				* {
					font-size: 10px;
				}
			}

			@media all and (max-width: 430px) {
				* {
					font-size: 8px;
				}
			}

			@media all and (max-width: 340px) {
				* {
					font-size: 6px;
				}
			}
		</style>
	</head>

	<body>
		<div id="board">
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
			<div></div>
		</div>

		<script>
			// "perfect position on mobile too", from https://pinniped.page/projects/chess/board
			const screenWidth = window.innerWidth;
			const screenHeight = window.innerHeight;
			document.querySelector("body").style = `height: ${screenHeight - 40}px`;

			// what goes in the squares
			const squares = [
				"detour",
				"see an articulated bus",
				"pass a bus on the same route and direction",
				"driver speaks (not about fare or directions)",
				`driver gives directions / "does this bus go to ___?"`,
				"wheelchair (driver gets up from seat)",
				"driver gets up from seat (not for a wheelchair)",
				"bus honk!",
				"someone's stop is missed",
				"cord/button doesn't work",
				"arrive at your stop (last chance for bingo!)",
				"people are standing",
				"go under a bridge",
				"go on a bridge",
				"stroller",
				"bus stops, but not at a stop",
				"bus goes up onto the curb",
				"something falls on the floor",
				"sitting at a stop...",
				"someone is running for the bus! (waiting)",
				"railroad crossing",
				"bus only lane!",
				"pass a stop with a shelter",
				"someone speaks in a language other than English",
			];

			// mix array for random bingo card; from https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
			function shuffle(array) {
				let currentIndex = array.length,
					randomIndex;

				while (currentIndex != 0) {
					randomIndex = Math.floor(Math.random() * currentIndex);
					currentIndex--;

					[array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
				}

				return array;
			}

			// do the mix!
			shuffle(squares);

			// set each square's id, add a click listener (invert square state)
			let i = 0;
			document.querySelectorAll("div div").forEach((square) => {
				square.setAttribute("id", i);

				if (i < 12) square.innerHTML = squares[i];
				if (i == 12) square.innerHTML = "bus moves (free space?)";
				if (i > 12) square.innerHTML = squares[i - 1];

				i++;

				square.addEventListener("click", (e) => {
					if (square.classList.contains("filled")) square.classList.remove("filled");
					else square.classList.add("filled");
				});
			});

			// TODO:
			// font that fits the square depending on the amount of text
			// what's going on on mobile? :
		</script>
	</body>
</html>
