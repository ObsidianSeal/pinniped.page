<!DOCTYPE html>

<html lang="en">
	<head>
		<title>keyPressTest</title>

		<meta charset="UTF-8" />

		<link rel="icon" href="../images/icon.png" />

		<meta name="theme-color" content="#4ecdc4" />

		<script src="https://kit.fontawesome.com/c6ef7d4818.js" crossorigin="anonymous"></script>

		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<link rel="stylesheet" href="../files/main.css" />

		<meta property="og:url" content="https://pinniped.page/projects/type" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="type" />
		<meta property="og:description" content="...?" />
		<meta property="og:image" content="https://pinniped.page/images/icon.png" />
	</head>

	<body style="padding: 20px">
		<h3 id="text"></h3>

		<div>
			<form name="input" id="input">
				<input name="textBox" id="textBox" style="margin: 20px 0 20px 0" placeholder="input for mobile devices" />
			</form>

			<h3 id="keyCode"></h3>

			<hr style="border: 0; border-top: 2px solid #4ecdc4" />

			<form name="input2" id="input2">
				<input name="textBox2" id="textBox2" style="margin: 20px 0 20px 0" placeholder="this text is duplicated" />
			</form>

			<h4 id="text2"></h4>
		</div>

		<script>
			let textArray;
			let text = document.getElementById("text");
			const keys = {};
			const specialKeys = [
				"ArrowUp",
				"ArrowDown",
				"ArrowLeft",
				"ArrowRight",
				"Escape",
				"Insert",
				"Delete",
				"Backspace",
				"Tab",
				"Shift",
				"CapsLock",
				"Enter",
				"Control",
				"Alt",
				"Meta",
				"<",
				">",
				"Home",
				"End",
				"PageUp",
				"PageDown",
			];

			//document.getElementById("textBox").focus();

			document.addEventListener("keydown", (e) => {
				keys[e.key] = true;
				document.getElementById("keyCode").innerHTML = e.keyCode;

				if (!specialKeys.includes(e.key)) {
					text.innerHTML = text.innerHTML + e.key;
				}

				if (e.key === "Backspace") {
					let string = text.innerHTML;
					textArray = string.split("");
					textArray.pop();
					string = textArray.join("");
					text.innerHTML = string;
				}

				if (keys["Shift"] === true && e.key === "Backspace") {
					text.innerHTML = "";
				}
				if (keys["Shift"] === true && e.key === "Enter") {
					document.querySelector("div").style = "display: none";
					document.documentElement.requestFullscreen();
				}
				if (e.key === "Escape") {
					document.querySelector("div").style = "display: block";
				}
			});

			document.addEventListener("keyup", (e) => {
				delete keys[e.key];
				document.input.textBox.value = "";
				document.getElementById("keyCode").innerHTML = document.getElementById("keyCode").innerHTML + " " + e.keyCode;
			});

			document.getElementById("input").addEventListener("submit", (e) => {
				e.preventDefault();
			});

			// ---

			document.getElementById("input2").addEventListener("submit", (e) => {
				e.preventDefault();
			});

			document.getElementById("textBox2").addEventListener("input", (e) => {
				console.log(document.input2.textBox2.value);
				document.getElementById("text2").innerHTML = document.input2.textBox2.value;
			});
		</script>
	</body>
</html>
