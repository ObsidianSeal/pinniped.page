<!DOCTYPE html>

<html lang="en">
	<head>
		<title>BUS DATA</title>

		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="theme-color" content="#4ecdc4" />

		<link rel="icon" href="../images/icon.png" />

		<script src="https://kit.fontawesome.com/c6ef7d4818.js" crossorigin="anonymous"></script>

		<meta property="og:url" content="https://pinniped.page/projects/bus-data" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="BUS DATA" />
		<meta property="og:description" content="Where are London Transit&rsquo;s articulated buses?" />
		<meta property="og:image" content="https://pinniped.page/images/icon.png" />

		<meta name="description" content="Where are London Transit&rsquo;s articulated buses?" />
		<meta name="keywords" content="obsidian_seal, pinniped.page, bus, data, London, London Transit" />

		<style>
			/* FONTS */
			@import url(https://use.typekit.net/rzo4wst.css);

			/* COLOURS */
			:root {
				--base00: #1b2b34;
				--base01: #343d46;
				--base02: #4f5b66;
				--base03: #65737e;
				--base04: #a7adba;
				--base05: #c0c5ce;
				--base06: #cdd3de;
				--base07: #d8dee9;
				--base08: #ec5f67;
				--base09: #f99157;
				--base0A: #fac863;
				--base0B: #99c794;
				--base0C: #5fb3b3;
				--base0D: #6699cc;
				--base0E: #c594c5;
				--base0F: #ab7967;
			}

			/* MAIN STYLES */
			* {
				font-family: "degular";

				margin: 0;
				border: 0;
				padding: 0;

				color: var(--base00);
			}

			body {
				background-color: white;
				margin: auto;
				padding: 50px;
				max-width: 1500px;
			}

			h1 {
				font-weight: 700;
				font-size: 120px;
				width: fit-content;

				-webkit-user-select: none;
				-moz-user-select: none;
				-ms-user-select: none;
				user-select: none;
			}

			p,
			ul,
			div {
				font-weight: 400;
				font-size: 20px;
			}

			ul {
				margin-left: 35px;
			}

			li:not(li:last-child) {
				margin-bottom: 2px;
			}

			::marker {
				color: var(--base04);
			}

			b {
				font-weight: 700;
				font-size: 40px;
			}

			a {
				text-decoration-style: dashed;
				text-decoration-color: var(--base04);
				text-decoration-skip-ink: none;
			}

			a:hover,
			a:focus {
				text-decoration-color: var(--base09);
			}

			h2 a:hover,
			h2 a:focus {
				text-decoration-color: var(--base0C);
			}

			#to-top-button {
				width: 60px;
				height: 60px;

				font-size: 50px;

				position: fixed;
				right: 50px;
				bottom: 50px;

				display: none;
				align-items: center;
				justify-content: center;

				background-color: var(--base03);
			}

			#to-top-button i {
				color: white;
			}

			#to-top-button:hover {
				cursor: pointer;
				background-color: var(--base08);
			}

			.colours {
				display: flex;
				gap: 20px;
			}

			.colours div {
				width: 20px;
				height: 20px;
			}

			hr {
				border-top: 2px solid var(--base04);
			}

			h2 {
				font-weight: 400;
				font-size: 30px;
			}

			h2 span:not(.grammar, #time-to-update) {
				background-color: var(--base0E);
				color: var(--base00);
				font-weight: 700;
				padding: 0 5px;
			}

			.route {
				display: grid;
				grid-template-columns: 90px auto;
				gap: 20px;
				margin-top: 5px;
			}

			.route:first-child div:first-child {
				color: var(--base00);
			}

			.route div {
				font-size: 20px;
			}

			.route div:first-child {
				text-align: right;
				color: var(--base03);
			}

			.route div:last-child span {
				display: inline-block;
			}

			.route div:last-child span:not(:last-child) {
				transition: width 250ms;
			}

			.route div:last-child span:nth-child(1) {
				background-color: var(--base0D);
			}

			.route div:last-child span:nth-child(2) {
				background-color: var(--base0C);
			}

			.route:first-child div {
				font-weight: 700;
			}

			.hide {
				display: none;
			}

			table {
				border-collapse: collapse;
				font-size: 20px;
			}

			td {
				border: 2px solid var(--base04);
				padding: 5px 30px 5px 10px;
			}

			tr:first-child td {
				font-size: 30px;
				font-weight: 700;
			}

			.not-in-service {
				/* background-color: var(--base06); */
				color: var(--base08);
			}

			i.fa-check,
			i.fa-xmark,
			i.fa-triangle-exclamation {
				translate: 0 1px;
			}

			i.fa-check {
				color: var(--base0B);
			}

			i.fa-xmark {
				color: var(--base0A);
			}

			i.fa-triangle-exclamation {
				color: var(--base08);
			}

			/* SCROLLBAR(S) */
			::-webkit-scrollbar {
				width: 20px;
			}

			::-webkit-scrollbar-track {
				background-color: var(--base05);
			}

			::-webkit-scrollbar-thumb {
				background-color: var(--base03);
			}

			::-webkit-scrollbar-thumb:hover {
				background-color: var(--base02);
			}

			/* SELECTION */
			::selection {
				background-color: var(--base00);
				color: white;
			}

			/* ANIMATIONS */
			h1 span {
				display: inline-block;
			}

			.dance {
				animation: dance 1s;
			}

			@keyframes dance {
				0% {
					transform: translateY(0);
				}
				50% {
					transform: translateY(-10px);
				}
				100% {
					transform: translateY(0);
				}
			}
		</style>

		<script type="module">
			// big and important variables
			let busDataHeader = {};
			let busData = [];

			// list of buses, set manually
			const fleetObject = {
				// D60LFR
				24: ["D60LFR", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_D60LFR", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_24-27"],
				25: ["D60LFR", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_D60LFR", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_24-27"],
				27: ["D60LFR", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_D60LFR", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_24-27"],
				// XD60
				28: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_28-29"],
				29: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_28-29"],
				30: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_30-31"],
				31: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_30-31"],
				32: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_32"],
				33: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_33"],
				34: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_34"],
				35: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_35-36"],
				36: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_35-36"],
				37: ["XD60", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD60", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_37"],
				// XDE40
				175: ["XDE40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XDE40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_175-176"],
				176: ["XDE40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XDE40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_175-176"],
				177: ["XDE40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XDE40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_177-178"],
				178: ["XDE40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XDE40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_177-178"],
				// XD40
				301: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				302: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				303: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				304: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				305: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				306: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				307: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				308: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				310: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				311: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_301-311"],
				312: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_312-320"],
				313: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_312-320"],
				314: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_312-320"],
				316: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_312-320"],
				317: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_312-320"],
				318: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_312-320"],
				319: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_312-320"],
				320: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_312-320"],
				321: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				322: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				323: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				324: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				325: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				326: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				327: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				328: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				329: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				330: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				331: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				332: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_321-332"],
				333: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				334: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				335: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				336: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				337: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				338: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				339: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				340: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				341: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				342: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				343: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				344: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				345: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				346: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				347: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_333-347"],
				348: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				349: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				350: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				351: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				352: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				353: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				354: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				355: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				356: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				357: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				358: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				359: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				360: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				361: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				362: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				363: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				364: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_348-364"],
				365: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				366: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				367: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				368: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				369: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				370: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				371: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				372: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				373: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				374: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				375: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				376: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				377: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				378: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_365-378"],
				501: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				502: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				503: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				504: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				505: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				506: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				507: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				508: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				509: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				510: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				511: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				512: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				513: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				514: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				515: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				516: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				517: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				518: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				519: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				520: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				521: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				522: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				523: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				524: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				525: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				526: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				527: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_501-527"],
				528: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				529: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				530: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				531: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				532: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				533: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				534: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				535: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				536: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				537: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				538: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				539: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				540: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				541: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				542: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				543: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				544: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				545: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				546: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_528-546"],
				547: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				548: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				549: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				550: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				551: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				552: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				553: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				554: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				555: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_547-555"],
				556: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				557: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				558: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				559: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				560: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				561: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				562: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				563: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				564: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				565: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				566: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				567: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				568: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				569: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				570: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				571: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_556-571"],
				572: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				573: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				574: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				575: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				576: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				577: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				578: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				579: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				580: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				581: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				582: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				503: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				584: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				585: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				586: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				587: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				588: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				589: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				590: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_572-590"],
				591: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				592: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				593: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				594: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				595: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				596: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				597: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				598: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				599: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				600: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				601: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				602: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				603: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				604: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				605: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				606: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				607: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				608: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				609: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				610: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_591-610"],
				611: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				612: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				613: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				614: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				615: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				616: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				617: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				618: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				619: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				610: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				621: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				622: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				623: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				624: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_611-624"],
				625: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				626: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				627: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				628: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				629: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				630: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				631: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				632: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				633: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
				634: ["XD40", "https://cptdb.ca/wiki/index.php/New_Flyer_Industries_XD40", "https://cptdb.ca/wiki/index.php/London_Transit_Commission_625-634"],
			};
			const fleet = Object.keys(fleetObject).length;
			const fleetArticulated = 13; // manual count

			document.querySelector("#fleet-total").innerHTML = fleet;
			document.querySelector("#articulated-total").innerHTML = fleetArticulated;

			// get the data
			async function fetchData() {
				try {
					// make the request, receive the data
					const requestURL = "https://corsproxy.io/?url=http://gtfs.ltconline.ca/Vehicle/VehiclePositions.json";
					const request = new Request(requestURL);
					const response = await fetch(request);
					const responseJSON = await response.json();

					// set the data
					busDataHeader = responseJSON.header;
					busData = responseJSON.entity;
				} catch (error) {
					console.log(error); // hopefully this is not needed
				}
			}
			await fetchData();

			// date
			function updateDate() {
				let busDataDate = new Date(busDataHeader.timestamp * 1000);
				let month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][busDataDate.getMonth()];
				let day = busDataDate.getDate();
				let ordinal = [
					"st",
					"nd",
					"rd",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"st",
					"nd",
					"rd",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"th",
					"st",
				][busDataDate.getDate()];
				let year = busDataDate.getFullYear();
				let hour = busDataDate.getHours();
				let minute = busDataDate.getMinutes();
				let second = busDataDate.getSeconds();
				document.querySelector("#data-time").innerHTML = `${month} ${day}${ordinal}, ${year} @ ${hour}:${minute.toString().padStart(2, "0")}:${second
					.toString()
					.padStart(2, "0")}`;
			}
			updateDate();

			// where the cool stuff happens
			let firstRun = true;
			function updateBusData() {
				// variables
				let totalBuses = busData.length;
				let articulatedBuses = 0;
				let busDistribution = {
					1: 0,
					2: 0,
					3: 0,
					4: 0,
					5: 0,
					6: 0,
					7: 0,
					9: 0,
					10: 0,
					12: 0,
					13: 0,
					15: 0,
					16: 0,
					17: 0,
					19: 0,
					20: 0,
					24: 0,
					25: 0,
					27: 0,
					28: 0,
					30: 0,
					31: 0,
					33: 0,
					34: 0,
					35: 0,
					36: 0,
					37: 0,
					38: 0,
					90: 0,
					91: 0,
					92: 0,
					93: 0,
					94: 0,
					95: 0,
					102: 0,
					104: 0,
					106: 0,
				};
				let articulatedDistribution = {
					1: 0,
					2: 0,
					3: 0,
					4: 0,
					5: 0,
					6: 0,
					7: 0,
					9: 0,
					10: 0,
					12: 0,
					13: 0,
					15: 0,
					16: 0,
					17: 0,
					19: 0,
					20: 0,
					24: 0,
					25: 0,
					27: 0,
					28: 0,
					30: 0,
					31: 0,
					33: 0,
					34: 0,
					35: 0,
					36: 0,
					37: 0,
					38: 0,
					90: 0,
					91: 0,
					92: 0,
					93: 0,
					94: 0,
					95: 0,
					102: 0,
					104: 0,
					106: 0,
				};

				// create bar graph and table
				if (firstRun) {
					for (let route in busDistribution) {
						// for each route, create an entry (row)
						let routeEntry = document.createElement("div");
						routeEntry.classList.add("route");

						// create label, 100-series have an asterisk
						let routeNumber = document.createElement("div");
						if (route < 100) routeNumber.innerHTML = `${route.toString().padStart(2, "0")}:`;
						else routeNumber.innerHTML = `${route}*:`;

						// create bars and number
						let busQuantity = document.createElement("div");
						busQuantity.id = `route-${route}`;
						busQuantity.innerHTML = `<span id="non-articulated-${route}">&nbsp;</span><span id="articulated-${route}">&nbsp;</span><span id="value-${route}">&nbsp;# (#)</span>`;

						// add to entry (row)
						routeEntry.appendChild(routeNumber);
						routeEntry.appendChild(busQuantity);

						// add entry (row) to container
						document.querySelector(".route-container").appendChild(routeEntry);
					}

					for (let bus in fleetObject) {
						// for each bus, add a row to the table
						let row = document.createElement("tr");
						row.id = `bus-${bus}`;
						let icon = "xmark";
						if (fleetObject[bus][0] == "D60LFR" || fleetObject[bus][0] == "XD60") icon = "check";
						row.innerHTML = `<td><a href="${fleetObject[bus][2]}" target="_blank" title="CPTDB wiki > London Transit Commission > ${bus} [GENERATED LINK; EXTERNAL]">${bus}</a></td><td><a href="${fleetObject[bus][1]}" target="_blank" title="CPTDB wiki > ${fleetObject[bus][0]} [GENERATED LINK; EXTERNAL]">${fleetObject[bus][0]}</a></td><td><i class="fa-sharp fa-solid fa-${icon}"></i></td><td>???</td><td>???</td>`;
						document.querySelector("table").appendChild(row);
					}

					firstRun = false;
				}

				// iterate through each bus
				let simpleBusData = {};
				for (let i = 0; i < totalBuses; i++) {
					// general information, also in the table
					let busID = parseInt(busData[i].id);
					let routeNumber = parseInt(busData[i].vehicle.trip.route_id);
					let latitude = busData[i].vehicle.position.latitude;
					let longitude = busData[i].vehicle.position.longitude;

					// remember the information
					simpleBusData[busID] = [routeNumber, latitude, longitude];

					// calculate distributions and count the number of articulated buses
					busDistribution[routeNumber]++;
					if (busID < 100) {
						articulatedBuses++;
						articulatedDistribution[routeNumber]++;
					}
				}

				// show totals
				document.querySelector("#bus-total").innerHTML = `${totalBuses}`;
				document.querySelector("#bus-total-articulated").innerHTML = `${articulatedBuses}`;

				// format percentages
				let totalBusesPercent = new Intl.NumberFormat("en", {
					style: "percent",
					minimumFractionDigits: 2,
					maximumFractionDigits: 2,
				}).format(totalBuses / fleet);

				let articulatedBusesPartialPercent = new Intl.NumberFormat("en", {
					style: "percent",
					minimumFractionDigits: 2,
					maximumFractionDigits: 2,
				}).format(articulatedBuses / totalBuses);

				let articulatedBusesPercent = new Intl.NumberFormat("en", {
					style: "percent",
					minimumFractionDigits: 2,
					maximumFractionDigits: 2,
				}).format(articulatedBuses / fleetArticulated);

				// show percentages
				document.querySelector("#bus-total-percent").innerHTML = totalBusesPercent;
				document.querySelector("#bus-total-articulated-partial-percent").innerHTML = articulatedBusesPartialPercent;
				document.querySelector("#bus-total-articulated-percent").innerHTML = articulatedBusesPercent;

				// DYNAMIC GRAMMAR
				if (articulatedBuses == 0) {
					document.querySelector("#articulated-info").classList.add("hide");
					document.querySelector("#articulated-none").classList.remove("hide");
				} else {
					document.querySelector("#articulated-info").classList.remove("hide");
					document.querySelector("#articulated-none").classList.add("hide");
				}

				if (articulatedBuses == 1) document.querySelector("#articulated-grammar-1").innerHTML = "is";
				else document.querySelector("#articulated-grammar-1").innerHTML = "are";

				if (totalBuses == 0) {
					document.querySelector("#total-info").classList.add("hide");
					document.querySelector("#total-none").classList.remove("hide");
				} else {
					document.querySelector("#total-info").classList.remove("hide");
					document.querySelector("#total-none").classList.add("hide");
				}

				if (totalBuses == 1) {
					document.querySelector("#total-grammar-1").innerHTML = "is";
					document.querySelector("#total-grammar-2").innerHTML = "bus";
				} else {
					document.querySelector("#total-grammar-1").innerHTML = "are";
					document.querySelector("#total-grammar-2").innerHTML = "buses";
				}

				// update bar graph
				if (!firstRun) {
					for (let route in busDistribution) {
						// include a number in parentheses?
						let articulatedIndicator = "";
						if (articulatedDistribution[route] > 0) articulatedIndicator = ` (${articulatedDistribution[route]})`;

						// set values
						document.querySelector(`#non-articulated-${route}`).style = `width: ${(busDistribution[route] - articulatedDistribution[route]) * 50}px`;
						document.querySelector(`#articulated-${route}`).style = `width: ${articulatedDistribution[route] * 50}px`;
						document.querySelector(`#value-${route}`).innerHTML = `&nbsp;${busDistribution[route]}${articulatedIndicator}`;
					}
				}

				// update table
				if (!firstRun) {
					for (let bus in fleetObject) {
						let row = document.querySelector(`#bus-${bus}`);

						row.children[3].classList.remove("not-in-service");
						row.children[3].removeAttribute("colspan");

						row.children[4].classList.remove("not-in-service");
						row.children[4].classList.remove("hide");

						if (simpleBusData.hasOwnProperty(bus)) {
							row.children[3].innerHTML = simpleBusData[bus][0].toString().padStart(2, "0");
							row.children[4].innerHTML = `<a href="https://www.google.ca/maps/search/${simpleBusData[bus][1]},${
								simpleBusData[bus][2]
							}" target="_blank" title="Google Maps > ${simpleBusData[bus][1]}, ${simpleBusData[bus][2]} [GENERATED LINK; EXTERNAL]">${simpleBusData[bus][1]
								.toString()
								.padEnd(8, "0")}, ${simpleBusData[bus][2].toString().padEnd(9, "0")}</a>`;
						} else {
							row.children[3].classList.add("not-in-service");
							row.children[3].innerHTML = `<i class="fa-sharp fa-solid fa-triangle-exclamation"></i> this bus is not in service`;
							row.children[3].setAttribute("colspan", 2);

							row.children[4].classList.add("not-in-service");
							row.children[4].innerHTML = "";
							row.children[4].classList.add("hide");
						}
					}
				}
			}
			updateBusData();

			// automatic update timer
			let timer = 30 - 1;
			setInterval(() => {
				// update, reset at 0
				if (timer == 0) {
					update();
					timer = 30;
				}
				document.querySelector("#time-to-update").innerHTML = timer;

				// DYNAMIC GRAMMAR
				if (timer == 1) document.querySelector("#update-grammar").innerHTML = "";
				else document.querySelector("#update-grammar").innerHTML = "s";

				// tick
				timer--;
			}, 1000);

			// the actual update
			async function update() {
				await fetchData();
				updateDate();
				updateBusData();
			}
		</script>
	</head>

	<body>
		<h1>
			<i class="fa-sharp fa-solid fa-bus"></i> <span>B</span><span>U</span><span>S</span> <span>D</span><span style="translate: -5px 0">A</span
			><span style="translate: -15px 0">T</span><span style="translate: -25px 0">A</span>
		</h1>

		<br />

		<p>v0.0.10 — April 10th, 2025 — <a href="" title="this page (click to refresh)">pinniped.page/projects/bus-data</a></p>

		<p>
			a project by <a href="../about.html" target="_blank" title="pinniped.page — About">Obsidian_Seal</a> — not affiliated with
			<a href="https://londontransit.ca/" target="_blank" title="London Transit&rsquo;s website [EXTERNAL]">London Transit</a>
		</p>

		<br />

		<b>QUICK LINKS</b>
		<ul>
			<li>
				<a
					href="https://realtime.londontransit.ca/#/app/nextdepartures"
					target="_blank"
					title="&ldquo;INFO-Web Transit Information&rdquo; / &ldquo;LTC - Next departures&rdquo; / &ldquo;Real-Time&rdquo; [EXTERNAL]"
					>LTC realtime</a
				>
			</li>
			<li>
				<a href="https://cptdb.ca/wiki/index.php/London_Transit_Commission" target="_blank" title="CPTDB wiki — London Transit Commission [EXTERNAL]"
					>CPTDB wiki — London Transit Commission</a
				>
			</li>
		</ul>

		<br />
		<br />
		<hr />
		<br />
		<br />

		<b>THE DATA</b>
		<h2>
			<a href="http://gtfs.ltconline.ca/Vehicle/VehiclePositions.json" target="_blank" title="LTC Open Data > VehiclePositions.json [FILE; EXTERNAL]"
				>VehiclePositions.json</a
			>
			from
			<span style="background-color: var(--base0C)" id="data-time">???</span>
		</h2>
		<p style="margin-top: 5px; color: var(--base03)">
			automatically updating in <span id="time-to-update" style="color: var(--base03)">30</span> second<span
				class="grammar"
				id="update-grammar"
				style="color: var(--base03)"
				>s</span
			>...
		</p>

		<br />

		<b>BUS TOTALS</b>
		<h2 id="total-info">
			There <span class="grammar" id="total-grammar-1">are</span> <span id="bus-total">#</span> <span class="grammar" id="total-grammar-2">buses</span> in service, making
			up <span id="bus-total-percent">%</span> of London Transit&rsquo;s fleet.
		</h2>
		<h2 id="total-none" class="hide">London Transit it not currently running any buses.</h2>
		<h2 id="articulated-info">
			<span id="bus-total-articulated">#</span> of those buses <span class="grammar" id="articulated-grammar-1">are</span> articulated,
			<span id="bus-total-articulated-partial-percent">%</span> of in-service buses and <span id="bus-total-articulated-percent">%</span> of London Transit&rsquo;s fleet
			of articulated buses.
		</h2>
		<h2 id="articulated-none" class="hide">None of them are articulated.</h2>

		<br />

		<b>BUS DISTRIBUTION</b>
		<p>
			The number of buses on each
			<a href="https://www.londontransit.ca/plan-a-trip/schedules/" target="_blank" title="London Transit > Routes & Schedules [EXTERNAL]">route</a>, shown as a bar
			graph.<br />If a <a href="https://www.londontransit.ca/plan-a-trip/schedules/" target="_blank" title="London Transit > Routes & Schedules [EXTERNAL]">route</a> has
			at least one <a href="https://en.wikipedia.org/wiki/Articulated_bus" target="_blank" title="Wikipedia > Articulated bus [EXTERNAL]">articulated bus</a> running on
			it, the number of said buses is shown next to the total and reflected in a separate, teal segment of the corresponding bar.
		</p>
		<br />
		<div class="route-container">
			<div class="route">
				<div>ROUTE NUMBER</div>
				<div><br />BUSES (ARTICULATED, IF ANY)</div>
			</div>
		</div>
		<br />
		<p style="color: var(--base03)">
			*the 100-series (<a href="https://en.wikipedia.org/wiki/Short_turn" target="_blank" style="color: var(--base03)" title="Wikipedia > Short turn [EXTERNAL]"
				>short turn</a
			>) routes only run from September to April (for university/college students)
		</p>

		<br />

		<b>BUS POSITIONS & MODELS</b>
		<p>
			Below is a table of all <span id="fleet-total" style="font-weight: 700">#</span> buses in
			<a
				href="https://cptdb.ca/wiki/index.php/London_Transit_Commission#Fleet_roster"
				target="_blank"
				title="CPTDB wiki > London Transit Commission (Fleet roster) [EXTERNAL]"
				>London Transit&rsquo;s fleet</a
			>.
		</p>
		<p>
			Every bus has a unique ID. If it seems like some IDs are missing, that&rsquo;s because the bus with that ID has been retired. Click on each ID for more information
			about the bus.
		</p>
		<p>
			London Transit currently operates five unique bus models, all of which are produced in Canada by
			<a href="https://www.newflyer.com/" target="_blank" title="New Flyer [EXTERNAL]">New Flyer</a>. Click on a model to learn more.
		</p>
		<p>
			<span id="articulated-total" style="font-weight: 700">#</span> of London Transit&rsquo;s buses are
			<a href="https://en.wikipedia.org/wiki/Articulated_bus" target="_blank" title="Wikipedia > Articulated bus [EXTERNAL]">articulated</a>.
		</p>
		<p>
			For buses that are currently running, their route and position (latitude and longitude) are given. Click on a position to view it on
			<a href="https://www.google.ca/maps" target="_blank" title="Google Maps [EXTERNAL]">Google Maps</a>.
		</p>
		<br />
		<table>
			<tr>
				<td>ID</td>
				<td>model</td>
				<td>articulated?</td>
				<td>route</td>
				<td>position</td>
			</tr>
		</table>

		<br />
		<br />
		<hr />
		<br />
		<br />

		<b>ATTRIBUTION</b>
		<ul>
			<li>
				bus data from &ldquo;<a href="https://www.londontransit.ca/open-data/" target="_blank" title="Open Data — London Transit Commission [EXTERNAL]"
					>Open Data — London Transit Commission</a
				>&rdquo;
			</li>
			<li>
				additional information from <a href="https://cptdb.ca/wiki/index.php/Main_Page" target="_blank" title="CPTDB wiki [EXTERNAL]">the CPTDB wiki</a>,
				<a href="https://londontransit.ca/" target="_blank" title="London Transit&rsquo;s website [EXTERNAL]">London Transit&rsquo;s website</a>, and &ldquo;<a
					href="https://realtime.londontransit.ca/#/app/nextdepartures"
					target="_blank"
					title="&ldquo;INFO-Web Transit Information&rdquo; / &ldquo;LTC - Next departures&rdquo; / &ldquo;Real-Time&rdquo; [EXTERNAL]"
					>LTC realtime</a
				>&rdquo;
			</li>
			<li>CORS proxy through <a href="https://corsproxy.io/" target="_blank" title="CorsProxy [EXTERNAL]">CorsProxy</a></li>
			<li>
				<a href="https://fonts.adobe.com/fonts/degular" target="_blank" title="Adobe Fonts > Degular [EXTERNAL]">Degular (typeface)</a> by
				<a href="https://ohnotype.co/" target="_blank" title="OH no Type Co. [EXTERNAL]">OH no Type Co.</a> on
				<a href="" target="_blank" title="Adobe Fonts [EXTERNAL]">Adobe Fonts</a>
			</li>
			<li>icons from <a href="https://fontawesome.com/" target="_blank" title="Font Awesome [EXTERNAL]">Font Awesome</a></li>
			<li>
				<a
					href="https://github.com/voronianski/oceanic-next-color-scheme"
					target="_blank"
					title="GitHub > voronianski > &ldquo;oceanic-next-color-scheme&rdquo; [EXTERNAL]"
					>Oceanic Next</a
				>
				colour scheme
			</li>
			<li>and help from some awesome people!</li>
		</ul>

		<br />
		<br />
		<br />

		<div class="colours">
			<div style="background-color: var(--base08)"></div>
			<div style="background-color: var(--base09)"></div>
			<div style="background-color: var(--base0A)"></div>
			<div style="background-color: var(--base0B)"></div>
			<div style="background-color: var(--base0C)"></div>
			<div style="background-color: var(--base0D)"></div>
			<div style="background-color: var(--base0E)"></div>
			<div style="background-color: var(--base0F)"></div>
		</div>

		<div id="to-top-button"><i class="fa-sharp fa-solid fa-arrow-up"></i></div>

		<script>
			// animate the title (make it DANCE!!)
			lastDance = 0;
			document.querySelector("h1").addEventListener("mouseover", () => {
				if (new Date().getTime() - lastDance > 1600) {
					for (let i = 0; i < 7; i++) {
						setTimeout(() => {
							document.querySelector(`h1 span:nth-child(${i + 2})`).classList.add("dance");
						}, 100 * i);
					}
					setTimeout(() => {
						document.querySelectorAll("h1 span").forEach((span) => {
							span.classList.remove("dance");
						});
					}, 1600);
					lastDance = new Date().getTime();
				}
			});

			// show "to-top-button" on scroll
			document.addEventListener("scroll", (e) => {
				if (window.scrollY > 300) document.querySelector("#to-top-button").style = "display: flex";
				else document.querySelector("#to-top-button").style = "display: none";
			});

			// click on "to-top-button"
			document.querySelector("#to-top-button").addEventListener("click", (e) => {
				window.scroll(0, 0);
			});
		</script>
	</body>
</html>
