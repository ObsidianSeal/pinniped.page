<!doctype html>

<html lang="en-CA">
	<head>
		<title>???</title>

		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="theme-color" content="#292F36" />

		<link rel="icon" href="https://pinniped.page/images/icon.png" />
		<link rel="stylesheet" href="https://pinniped.page/files/main.css" />

		<script src="https://pinniped.page/files/menu.js"></script>

		<script src="https://kit.fontawesome.com/c6ef7d4818.js" crossorigin="anonymous"></script>

		<meta property="og:url" content="https://pinniped.page/404" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="???" />
		<meta property="og:description" content="Don&rsquo;t bother clicking on this link. There is nothing here." />
		<meta property="og:image" content="https://pinniped.page/images/icon.png" />

		<style>
			.h60 {
				height: 60px;
			}

			.centre {
				flex-direction: column;
			}

			.centre h2 {
				text-align: center;
			}

			.new-button-group {
				justify-content: center;
				margin-top: 40px;
			}
		</style>
	</head>

	<body class="fa-width-auto">
		<div class="navbar">
			<a class="invert navbar-item" href="https://pinniped.page/"><img class="navbar-icon" src="https://pinniped.page/images/icon.png" alt="pinniped.page logo" /></a>
			<a class="invert navbar-item item1" href="https://pinniped.page/projects"><p>Projects</p></a>
			<a class="invert navbar-item item2" href="https://pinniped.page/blog"><p>Blog</p></a>
			<a class="invert navbar-item item3" href="https://pinniped.page/about"><p>About</p></a>

			<i id="menu-open" class="fas fa-bars invert navbar-item-mobile" onclick="menu()"></i>
			<i id="menu-close" class="fas fa-times invert navbar-item-mobile" onclick="menu()"></i>
		</div>

		<div id="navbar-mobile">
			<h2 class="navbar-item-mobile-2"><a class="invert" href="https://pinniped.page/">Home</a></h2>
			<h2 class="navbar-item-mobile-2"><a class="invert" href="https://pinniped.page/projects">Projects</a></h2>
			<h2 class="navbar-item-mobile-2"><a class="invert" href="https://pinniped.page/blog">Blog</a></h2>
			<h2 class="navbar-item-mobile-2"><a class="invert" href="https://pinniped.page/about">About</a></h2>
		</div>

		<div class="main">
			<div class="h60"></div>

			<div class="centre more-wrap content-container">
				<h2 id="main-message">Loading<span id="loading-dot-1">.</span><span id="loading-dot-2">.</span><span id="loading-dot-3">.</span></h2>

				<div class="new-button-group">
					<a class="new-button small-text" href="https://status.pinniped.page/" title="pinniped.page — Status">
						<div>
							<span>WEBSITE STATUS</span>
							<span><i class="fa-solid fa-angle-right"></i><i class="fa-solid fa-angle-right"></i><i class="fa-solid fa-angle-right"></i></span>
						</div>
					</a>

					<a class="new-button small-text" href="https://pinniped.page/contact" title="pinniped.page — Contact">
						<div>
							<span>REPORT A PROBLEM</span>
							<span><i class="fa-solid fa-angle-right"></i><i class="fa-solid fa-angle-right"></i><i class="fa-solid fa-angle-right"></i></span>
						</div>
					</a>
				</div>
			</div>

			<div class="footer" style="background: #ffffee"></div>
			<div class="footer" style="background: #ff6b6b"></div>
			<div class="footer" style="background: #ffe66d"></div>
			<div class="footer" style="background: #4ecdc4"></div>
		</div>

		<script type="module">
			"use strict";

			let message = "ERROR 404 / Not Found";
			let redirected = false;

			// HTTP response status codes (from "yikes")
			let codes = {
				// info codes
				100: "INFO 100 / Continue",
				101: "INFO 101 / Switching Protocols",
				102: "INFO 102 / Processing",
				103: "INFO 103 / Early Hints",
				// success codes
				200: "SUCCESS 200 / OK",
				201: "SUCCESS 201 / Created",
				202: "SUCCESS 202 / Accepted",
				203: "SUCCESS 203 / Non-Authoritative Information",
				204: "SUCCESS 204 / No Content",
				205: "SUCCESS 205 / Reset Content",
				206: "SUCCESS 206 / Partial Content",
				207: "SUCCESS 207 / Multi-Status",
				208: "SUCCESS 208 / Already Reported",
				226: "SUCCESS 226 / IM Used",
				// notice (redirect?) codes
				300: "NOTICE 300 / Multiple Choices",
				301: "NOTICE 301 / Moved Permanently",
				302: "NOTICE 302 / Found",
				303: "NOTICE 303 / See Other",
				304: "NOTICE 304 / Not Modified",
				305: "NOTICE 305 / Use Proxy",
				306: "NOTICE 306 / unused",
				307: "NOTICE 307 / Temporary Redirect",
				308: "NOTICE 308 / Permanent Redirect",
				// client error codes
				400: "ERROR 400 / Bad Request",
				401: "ERROR 401 / Unauthorized",
				402: "ERROR 402 / Payment Required",
				403: "ERROR 403 / Forbidden",
				404: "ERROR 404 / Not Found",
				405: "ERROR 405 / Method Not Allowed",
				406: "ERROR 406 / Not Acceptable",
				407: "ERROR 407 / Proxy Authentication Required",
				408: "ERROR 408 / Request Timeout",
				409: "ERROR 409 / Conflict",
				410: "ERROR 410 / Gone",
				411: "ERROR 411 / Length Required",
				412: "ERROR 412 / Precondition Failed",
				413: "ERROR 413 / Payload Too Large",
				414: "ERROR 414 / URI Too Long",
				415: "ERROR 415 / Unsupported Media Type",
				416: "ERROR 416 / Range Not Satisfiable",
				417: "ERROR 417 / Expectation Failed",
				418: "ERROR 418 / I&rsquo;m a teapot",
				421: "ERROR 421 / Misdirected Request",
				422: "ERROR 422 / Unprocessable Entity",
				423: "ERROR 423 / Locked",
				424: "ERROR 424 / Failed Dependency",
				425: "ERROR 425 / Too Early",
				426: "ERROR 426 / Upgrade Required",
				428: "ERROR 428 / Precondition Required",
				429: "ERROR 429 / Too Many Requests",
				431: "ERROR 431 / Request Header Fields Too Large",
				451: "ERROR 451 / Unavailable For Legal Reasons",
				// server error codes
				500: "ERROR 500 / Internal Server Error",
				501: "ERROR 501 / Not Implemented",
				502: "ERROR 502 / Bad Gateway",
				503: "ERROR 503 / Service Unavailable",
				504: "ERROR 504 / Gateway Timeout",
				505: "ERROR 505 / HTTP Version Not Supported",
				506: "ERROR 506 / Variant Also Negotiates",
				507: "ERROR 507 / Insufficient Storage",
				508: "ERROR 508 / Loop Detected",
				510: "ERROR 510 / Not Extended",
				511: "ERROR 511 / Network Authentication Required",
				// custom 600s
				600: "HELLO 600 / Hi",
				// custom 700s
				700: "ERROR 700 / No Results",
				701: "ERROR 701 / Screen Too Small",
				702: "ERROR 702 / Minecraft Server IP",
				777: "ERROR 777 / Website Too Cool",
			};

			// get query
			const URL = window.location.href;
			const query = URL.substring(22);
			let project = query; // don't look past "#" or "?" when validating path
			if (query.includes("?")) project = query.substring(0, query.indexOf("?"));
			else if (query.includes("#")) project = query.substring(0, query.indexOf("#"));

			// Discord, sandbox (temporary, again), ttt (temporary)
			if (query == "discord" || query == "sandbox" || query.startsWith("ttt")) {
				redirected = true;
				if (query == "discord") window.location.href = "https://discord.gg/yswDu7kywv";
				if (query == "sandbox") window.location.href = "https://ite.fyi/sandbox";
				if (query.startsWith("ttt")) window.location.href = "https://pinniped.page/yikes?s=410";
			}

			// detour: "yikes"
			if (Object.keys(codes).includes(query)) {
				redirected = true;
				window.location.href = "https://pinniped.page/yikes?s=" + query;
			}

			// NEW: get list of paths from .JSON file
			let paths = [];
			try {
				const requestURL = "https://pinniped.page/files/projects.json";
				const request = new Request(requestURL);
				const response = await fetch(request);
				const responseJSON = await response.json();

				// ignore "files/"
				for (let project in responseJSON) {
					let path = responseJSON[project].path;
					if (path.startsWith("projects/")) paths.push(path.substring(9));
				}
			} catch (error) {
				console.error(error);
				message = "ERROR: could not fetch project paths";
			}

			// go to a project if path is valid
			for (let path of paths) {
				if (project == path) {
					redirected = true;
					window.location.href = "https://pinniped.page/projects/" + query;
				}
			}

			// else...404
			if (!redirected) document.querySelector("#main-message").innerHTML = message;
		</script>

		<script src="files/auto-project-link-target.js" type="module"></script>
	</body>
</html>
